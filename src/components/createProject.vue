<template>
    <div>
        <el-tag class="mb10">{{getCurrentProject}}</el-tag>
        <div style="min-height: 10px"></div>
        <div v-if="getCurrentProject !=='default'">
            <el-button type="primary"
                       @click="createProject"
                       :loading="loadingProject">
                {{systemLanguage.project.title}}&nbsp;&nbsp;&nbsp;<i>{{getCurrentProject}}</i></el-button>
        </div>
        <div v-else>
            {{systemLanguage.project.error}}
        </div>
    </div>
</template>

<script>
import {mapActions} from 'vuex'
import common from './commonMixins'
import axios from 'axios'

export default {
  name: 'create-project',
  mixins: [common],
  data () {
    return {
      loadingProject: false
    }
  },
  methods: {
    ...mapActions([]),
    createProject () {
      this.loadingProject = true
      let me = this
      axios.post('http://localhost:5000/file/project/' + this.getCurrentProject)
        .then(function (response) {
          me.loadingProject = true
          me.$router.push('Admin')
        })
        .catch(function (response) {
          if (response.data) {
            console.error(response.data.error)
          } else {
            console.log(response)
          }
        })
    }
  }
}
</script>
